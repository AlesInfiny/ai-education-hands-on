# COBOL プログラム設計書 テンプレート

## 1. 基本情報

- プログラム名
- モジュール名
- 作成日

## 2. プログラムの目的と機能概要

## 3. 使用ファイル一覧（入出力）

- ファイル名
- ファイル論理名
- 使用区分（入力／出力）

## 4. 使用データ項目

### データモデル

#### データ構造

- テーブル定義
- インデックスとレート
- 一時変数
- リンクセクション変数

### 入力データ

| エンティティ  |    項目名     |  定義 (COBOL)   | Java 変換後の型 |       用途       |
| ------------- | ------------- | --------------- | --------------- | ---------------- |
| -             | PRODUCT-TABLE | `PRODUCT-TABLE` | `List<Product>` | 商品リスト       |
| PRODUCT-ENTRY | -             | `PRODUCT-ENTRY` | `Product`       | 商品エンティティ |
| PRODUCT-ENTRY | ID            | `PIC 9(7)V99`   | `BigDecimal`    | 商品ID           |
| PRODUCT-ENTRY | NAME          | `PIC X(50)`     | `String`        | 商品名           |
| PRODUCT-ENTRY | PRICE         | `PIC 9(7)V99`   | `BigDecimal`    | 価格             |
| -             | BATCH-ID      | `PIC 9(7)V99`   | `BigDecimal`    | バッチID         |

### 出力データ

| エンティティ |   項目名   |  定義 (COBOL)  | Java 変換後の型 |         用途         |
| ------------ | ---------- | -------------- | --------------- | -------------------- |
| RESULT-ENTRY | -          | `RESULT-ENTRY` | `Result`        | 集計結果エンティティ |
| RESULT-ENTRY | ITEM-COUNT | `PIC 9(7)V99`  | `BigDecimal`    | 商品数               |
| RESULT-ENTRY | TOTAL      | `PIC 9(7)V99`  | `BigDecimal`    | 合計                 |

## 5. プログラム構造・モジュール設計

- プログラム全体の構造（メインプログラム、サブルーチン、 COPY 句など）
- モジュールの役割・入出力・処理概要

## 6. 詳細処理

1. 商品価格 × 数量 ＝ 小計
1. キャンペーン対象商品の場合、割引率を取得する。
   例）割引率 15% → 割引額 = 小計 × 0.15
1. 割引後金額 = 小計 - 割引額
1. ポイント利用時は、さらにポイント分を減算する。
1. 最終支払金額を出力する。

## 7. エラー・例外処理仕様

- エラー条件
- エラー処理内容

## 8. 呼び出し関係／外部インターフェース

- 呼び出し元プログラム
- 呼び出し区分 (CALL / SHELL)
- パラメーター
