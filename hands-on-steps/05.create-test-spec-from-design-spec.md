# 設計書からテスト仕様書を作成する

1. GitHub Copilot Chat を開きます。
1. GitHub Copilot に次の質問をします。

    ```plaintext
    #file:designdoc-main.md をインプットとし、 #file:test-specification-template.md に基づいて、テスト仕様書を作成してください。
    ```

    ※コピー＆ペーストでファイルがうまく参照されない場合は、プロンプトに `#` を直接入力してファイルを選択してください。

1. GitHub Copilot によって作成された回答の右上の `...` をクリックし、「新しいファイルに挿入する」を選択します。
1. `testspec-main.md` というファイル名を入力し、保存します。

<details>
<summary>GitHub Copilot の回答例</summary>

```plaintext

# テスト仕様書

## 1. テスト対象

- モジュール名：PayrollSystem
- プログラム名：main.cobc（Java移行後：PayrollSystem.java）

## テストの目的

- 従業員の給与計算、部門ごとの集計、表示処理が設計通りに正しく行われることを検証する。
- ボーナス計算サブルーチン（CalculateBonus）との連携が正しく行われることを検証する。

## テスト対象

- 従業員データ初期化（INITIALIZE-EMPLOYEES）
- 従業員IDによるソート（SORT-EMPLOYEES）
- 給与計算（CALCULATE-NET-SALARIES）
- 部門ごとの給与合計算出（CALCULATE-DEPARTMENT-TOTALS）
- 従業員ごとの給与情報表示（DISPLAY-EMPLOYEES）
- 部門ごとの給与合計表示（DISPLAY-DEPARTMENT-TOTALS）
- ボーナス計算サブルーチン連携（CalculateBonus）

## テストケース

### 従業員データ初期化（INITIALIZE-EMPLOYEES）

| テストケース ID         | テスト観点         | テスト内容                                                                 | 期待結果                                 |
|------------------------|--------------------|---------------------------------------------------------------------------|------------------------------------------|
| INIT_EMP_001           | 正常系             | 設計書記載の従業員5名で初期化を実施                                       | 各従業員ID・氏名・部門・基本給が正しく格納される |

### 従業員IDによるソート（SORT-EMPLOYEES）

| テストケース ID         | テスト観点         | テスト内容                                                                 | 期待結果                                 |
|------------------------|--------------------|---------------------------------------------------------------------------|------------------------------------------|
| SORT_EMP_001           | 正常系             | 初期化済み従業員データをID昇順でソート                                    | ソート済従業員IDが昇順で格納される        |
| SORT_EMP_002           | 境界値             | 同一IDが2件存在するデータでソート                                         | 両方の従業員が保持され、順序は安定ソート  |

### 給与計算（CALCULATE-NET-SALARIES）

| テストケース ID         | テスト観点         | テスト内容                                                                 | 期待結果                                 |
|------------------------|--------------------|---------------------------------------------------------------------------|------------------------------------------|
| CALC_SALARY_001        | ボーナス計算       | ソート済基本給=70000.00で計算                                             | ソート済ボーナス=7000.00（基本給×0.10）  |
| CALC_SALARY_002        | 控除計算           | ソート済基本給=70000.00で計算                                             | ソート済控除=3500.00（基本給×0.05）      |
| CALC_SALARY_003        | 税額控除計算       | ソート済基本給=70000.00で計算                                             | ソート済税額控除=14000.00（基本給×0.20） |
| CALC_SALARY_004        | 手取り給与計算     | ソート済基本給=70000.00, ボーナス=7000.00, 控除=3500.00, 税額控除=14000.00 | ソート済手取り給与=59500.00              |
| CALC_SALARY_005        | サブルーチン連携   | 任意の基本給でボーナス計算サブルーチンを呼び出し                          | サブルーチンから正しいボーナスが返る      |

### 部門ごとの給与合計算出（CALCULATE-DEPARTMENT-TOTALS）

| テストケース ID         | テスト観点         | テスト内容                                                                 | 期待結果                                 |
|------------------------|--------------------|---------------------------------------------------------------------------|------------------------------------------|
| DEPT_TOTAL_001         | 正常系             | 各従業員の部門・手取り給与で集計                                          | 各部門の合計給与が正しく集計される        |
| DEPT_TOTAL_002         | 異常系             | 部門名が空の従業員を含めて集計                                            | 部門名が初期化され、合計に含まれる         |

### 従業員ごとの給与情報表示（DISPLAY-EMPLOYEES）

| テストケース ID         | テスト観点         | テスト内容                                                                 | 期待結果                                 |
|------------------------|--------------------|---------------------------------------------------------------------------|------------------------------------------|
| DISP_EMP_001           | 正常系             | ソート済従業員データを表示                                                | 各従業員のID・氏名・部門・給与情報が表示される |

### 部門ごとの給与合計表示（DISPLAY-DEPARTMENT-TOTALS）

| テストケース ID         | テスト観点         | テスト内容                                                                 | 期待結果                                 |
|------------------------|--------------------|---------------------------------------------------------------------------|------------------------------------------|
| DISP_DEPT_001          | 正常系             | 部門ごとの合計給与を表示                                                  | 各部門名と合計給与が表示される            |

### エラー・例外処理

| テストケース ID         | テスト観点         | テスト内容                                                                 | 期待結果                                 |
|------------------------|--------------------|---------------------------------------------------------------------------|------------------------------------------|
| ERROR_001              | 配列範囲外         | 従業員数が最大従業員数を超える場合                                        | 最大件数までのみ処理される                |
| ERROR_002              | 部門名未設定       | 部門名がSPACESの従業員を含めて処理                                        | 部門名が正しく初期化される                |

## テストデータ

### TESTDATA_001

- 使用テーブル名：EMPLOYEE-TABLE
- 使用データ例：
    - 従業員ID：E001、従業員名：Alice Johnson、部門名：HR、基本給：70000.00
    - 従業員ID：E002、従業員名：Bob Smith、部門名：IT、基本給：85000.00
    - 従業員ID：E003、従業員名：Charlie Brown、部門名：Finance、基本給：60000.00
    - 従業員ID：E004、従業員名：David Wilson、部門名：IT、基本給：95000.00
    - 従業員ID：E005、従業員名：Eve Davis、部門名：HR、基本給：75000.00

### TESTDATA_002

- 使用テーブル名：EMPLOYEE-TABLE
- 使用データ例：
    - 従業員ID：E001（重複）、従業員名：Test User、部門名：HR、基本給：50000.00

## テスト環境

- OS：Windows 10 以降
- ミドルウェア：Java 17 以降
- ツール：JUnit 5 など

## テスト実施手順

1. テストデータを用意し、PayrollSystemクラスの各処理を呼び出す。
2. 各処理の出力や計算結果を期待値と比較する。
3. ボーナス計算サブルーチンはJava実装またはモックで代替し、連携を確認する。
4. 表示処理は標準出力の内容をキャプチャし、期待値と比較する。

## 備考・注意事項

- 計算誤差や端数処理はBigDecimalで厳密に検証すること。
- 入力データのバリエーション（空データ、最大件数超過、異常値等）も別途テストすること。

```

</details>
